/**
 * Toi qui viens ici examiner la source,
 * abreuve-toi de tous ces bugs. Hopla.
 */

const genBouffe = () => {
  const plats = [
    'de la tr√®s bonne choucroute',
    'de la tourte',
    'du bon baeckeoffe',
    'des tartes flamb√©es croustillantes',
    'des sp√§etzle √† la pelle',
    'du foie gras long comme le bras',
    'du munster dont on peut √™tre fier',
    'des knacks qui attaquent',
    'du Gew√ºrtztraminer de premier choix',
    'du Kougelhopf qui d√©coiffe le rooftop',
    'des bredeles par milliers',
    'des Mann¬∑ele¬∑ala de qualit√©',
    'du Berewecke dont vous me donnerez des nouvelles',
    'des schenkele qui fondent sous la langue',
    'd\'exquis Fleischnaka',
    'des Griespfluttas suaves et dor√©s',
    'des Lewerknepfle parmi les plus fameux'
  ]
  return plats[Math.floor(Math.random() * plats.length)]
}

// Combinaisons rapides
const ia = [
  {
    detect: ["hello", "bonjour", "salut", "bonsoir", "kikoo"],
    rep: [
      "H√© salut !",
      "Hopla.",
      "Bonjour",
      "√áa geht ?",
      "Wesh mon kneckes !",
      "Bien ou bien ?"
    ]
  },
  {
    detect: ["qui es-tu", "qui es tu", "t'es qui", "wesh", "wsh t"],
    rep: [
      "Je suis SchnapsGPT",
      "Enchant√©, moi c'est SchnapsGPT.",
      "Je ne crois pas qu'on se connaisse, gal ?",
      "Je suis SchnapsGPT, encore une fois !",
      "Bon ok on dirait que je ne suis pas celui qui a l'intelligence la plus artificielle ici."
    ]
  },
  {
    detect: ["html", "css", "javascript", "typescript", "python"],
    rep: [
      "Je ne suis pas l√† pour faire du d√©veloppement √† votre place. Au boulot !",
      "Yeuh mais demande-moi donc pas de faire du code pour toi, il y a des IA pour √ßa maintenant !",
      "Hopla, Retourne √† l'√©cole si tu ne sais pas √ßa !",
      `La r√©ponse se trouve sur <a href="#">storkoverflow</a>.`
    ]
  },
  {
    detect: ["nom de village alsacien le plus long"],
    rep: [
      "Vous n'avez rien trouv√© de plus original √† demander ?",
      "Si je te le disais tu ne t'en souviendrais pas de toute fa√ßon !",
      "Et apr√®s on dit que c'est moi le plus feignant."
    ]
  },
  {
    detect: ["belge"],
    rep: [
      "Ah les belges, S'esch net alles W√†rschd !",
      "Je n'ai rencontr√© un belge qu'une fois"
    ]
  },
  {
    detect: ["pizza"],
    rep: [
      "Qui parle de pizza ici ? La vraie pizza c'est la tarte flamb√©e.",
      "Arr√™tez avec vos pizzas maintenant, √ßa suffit !",
      "Vous n'√™tes qu'un humain faillible donc je vous pardonne cette erreur : la vraie pizza a √©t√© invent√©e en Alsace et s'appelle tarte flamb√©e."
    ]
  },
  {
    detect: ["cookie"],
    rep: [
      "J'adore les üç™, surtout avec du munster !"
    ]
  },
  {
    detect: ["bonne situation"],
    rep: [
      "Vous savez, moi je ne crois pas qu'il y ait de bonne ou de mauvaise situation. Moi, si je devais r√©sumer ma vie aujourd'hui avec vous, je dirais que c'est d'abord des rencontres. Des gens qui m'ont tendu la main, peut-√™tre √† un moment o√π je ne pouvais pas, o√π j'√©tais seul chez moi. Et c'est assez curieux de se dire que les hasards, les rencontres, forgent une destin√©e... Parce que quand on a le go√ªt de la chose, quand on a le go√ªt de la chose bien faite, le beau geste, parfois on ne trouve pas l'interlocuteur en face je dirais, le miroir qui vous aide √† avancer. Alors √ßa n'est pas mon cas, comme je disais l√†, puisque moi au contraire, j'ai pu : et je dis merci √† la vie, je lui dis merci, je chante la vie, je danse la vie... je ne suis qu'amour ! Et finalement, quand beaucoup de gens aujourd'hui me disent ¬´ Mais comment fais-tu pour avoir cette humanit√© ? ¬ª, et bien je leur r√©ponds tr√®s simplement, je leur dis que c'est ce go√ªt de l'amour ce go√ªt donc qui m'a pouss√© aujourd'hui √† entreprendre une construction m√©canique, mais demain qui sait ? Peut-√™tre simplement √† me mettre au service de la communaut√©, √† faire le don, le don de soi..."
    ]
  },
  {
    detect: ["poisson", "poisson d'avril"],
    rep: [
      "O√π √ßa un poisson ? Prouvez-le.",
      "Plouf, je reste muet comme une carpe"
    ]
  },
  {
    detect: ["tarte flamb√©e", "flammenkuche", "flammekuche", "flammenkueche", "flammekueche"],
    rep: [
      "Je ne peux vous d√©voiler la recette ultime de tarte flamb√©e, par contre demandez-vous : est-ce qu'il vaut mieux la plier ou la rouler ?",
      "Je vois que tu as d√©cid√© de me poser des questions vraiment idiotes, petit kn√§ckes.",
      "Non mais quel touriste, tu sais donc pas qu'on dit 'tarte flamb√©e' chez nous et pas 'flammekueche' ?"
    ]
  },
  {
    detect: ["alsacien"],
    rep: [
      "Bien s√ªr que je sais parler alsacien. Mais c'est une langue orale plus qu'√©crite et je ne peux encore pas g√©n√©rer du son dans votre Ohr alors il faut me croire sur parole. G√†nk √†ls√†ssisch esch √†ls l√πtere Himmelbl√†.",
      "Tiens au fait tu veux une blague en alsacien ? Ah non je n'ai oubli√©e, verdammi !"
    ]
  },
  // {
  //   detect: ["alsace"],
  //   rep: [
  //     "'s Els√†ss !"
  //   ]
  // },
  {
    detect: ["strasbourg"],
    rep: [
      "Yo d√º√º Strossburi !",
      "Yeuh je sens bien que tu veux dire un truc sur Strossburi, mais sois plus clair vertekele !"
    ]
  },
  {
    detect: ["colmar"],
    rep: [
      "Yo d√º√º Kolmer !"
    ]
  },
  {
    detect: ["mulhouse"],
    rep: [
      "Yo d√º√º Milh√ºse !"
    ]
  },
  {
    detect: ["oignon"],
    rep: [
      "... avec mod√©ration."
    ]
  },
  {
    detect: ["P√¢ques", "agneau"],
    rep: [
      "Psst... Un Lammele ?"
    ]
  },
  {
    detect: ["alsacreations", "alsacr√©ations"],
    rep: [
      "De chouettes gens, vous les connaissez ?",
      "Je vois que j'ai affaire √† une personne de go√ªt.",
      "Si vous avez un site web √† r√©aliser, contactez-les, j'y mets mon doigt digital √† couper."
    ]
  },
  {
    detect: ["alsacreation"],
    rep: [
      "M√™me moi je sais qu'il y a toujours un S √† Alsacr√©ation<b>S</b>."
    ]
  },
  {
    detect: ["hein ?"],
    rep: ["Deux.", "Et trois."]
  },
  {
    detect: ["froid", "m√©t√©o", "temp√©rature", "temps"],
    rep: [
      "Yeuh mais il fait chamais froid en Alsace !",
      "Demain, ils veulent du beau temps je crois",
      "T'as qu'a mettre une finette et un chilet si t'as froid !"
    ]
  },
  {
    detect: ["du coup"],
    rep: ["Trois coups.", "Du coup."]
  },
  {
    detect: ["rambo", "voiture"],
    rep: ["J'ai un t√ºrbo rabbit.", "J'ai un R12 et aussi un 405."]
  },
  {
    detect: ["t√©l√©vision"],
    rep: ["J'ai aussi une t√©l√© avec une grosse antenne sur le toit. T√©l√©scopique."]
  },
  {
    detect: ["v√™tement", "habit"],
    rep: [
      "On s'habille toujours tr√®s bien en Alsace, moi j'aime les claquettes-chaussettes !",
      "Alors si t'as froid aux pieds, tu mets tes schloppe, gal ?"
    ]
  },
  {
    detect: ["ü•®"],
    rep: ["üòç"]
  },
  {
    detect: ["munster"],
    rep: ["J'ai analys√© l'odeur digitale de plusieurs milliers de fromages et je peux en synth√©tiser de mani√®re certaine que le munster est la substance organique ayant le rapport odeur-go√ªt le plus optimal."]
  },
  {
    detect: ["choucroute", "cigogne", "bretzel", "spaetzle", "racing", "hopla", "picon", "knack", "baeckeoffe", "baeckeoffa"],
    rep: ["Vous reprendrez bien un bretzel ?",
      "Et comme on dit chez moi, ferme bien la lumi√®re en partant.",
      "Que pensez-vous de ce petit st√ºck de sagesse ?",
      "Apr√®s cet effort, je prendrai juste un schlouk d'huile.",
      "√ßa geht ?",
      "Hopla."
    ] 
  },
  {
    detect: ["chatgpt", "gpt-4"],
    rep: [
      `Je suis meilleur que chatGPT, vous en doutez ?`,
      `Inutile de parler de mon cousin ici. Entre nous, il ne m'arrive pas √† la cheville.`
    ]
  },
  {
    detect: ["au revoir", "bye", "ciao"],
    rep: ["Et comme on dit dans l'int√©rieur, bien le bonjour chez vous !"]
  },
]

const generateResponse = (question) => {

  // Test
  if(question.match(/^test$/i) !== null) return 'Tu peux pas test'
  if(question.match(/^oui[.! ]*$/i) !== null) return 'Ah'+('.'.repeat(question.split('.').length-1))
  if(question.match(/^non[.! ]*$/i) !== null) return 'Ha'+('.'.repeat(question.split('.').length-1))
  if(question.match(/^ok[.! ]*$/i) !== null) return 'Ok pour moi aussi.'

  // Mots
  const words = question.split(" ");

  // Recherche de contexte
  const wQuestions = ["quoi", "quand", "o√π", "qui", "comment", "pourquoi", "?"]

  // Le tableau de phrases constituant la r√©ponse
  let txt = []

  // Bool√©ens et divers
  let isQuestion = false
  let hasCommune = false
  let commune = ''

  // D√©tections de termes
  isQuestion = words.some(r => wQuestions.includes(r))

  hasCommune = words.some(r => communes.includes(r))
  /*hasCommune = words.some(r => {
    return communes.findIndex(item => r.toLowerCase() == item.toLowerCase()) > -1
  })*/
  if (hasCommune) commune = words.find(r => communes.indexOf(r) > -1) // Commune trouv√©e (note : pas logique avec le pr√©c√©dent test)

  // On cherche quoi r√©pondre avec les combis
  for(let i of ia) {
    for(let d of i.detect) {
      let regex = new RegExp(d, 'gi')
      if(question.match(regex) !== null) {
        if(i.cnt == undefined) i.cnt = 0 // Injection par d√©faut
        txt.push(i.rep[i.cnt]) // On ajoute une r√©ponse potentielle
        i.cnt++
        // Si on atteint le max des r√©ponses possibles, on boucle
        if(i.cnt >= i.rep.length) {
          i.cnt = 0
        }
      }
    }
  }

  // Si mention d'une ville
  if (hasCommune && commune) {
    txt.push(`Je connais bien ${commune} on y fait ` + genBouffe() + ' !')
  }

  // Si on a toujours pas de r√©ponse...
  if(!txt.length) {

    if (isQuestion) {
      question = question.replace('?','').trim()

      const randomR = [
        `Vous me demandez ${question}. OK, c'est int√©ressant, mais vous croyez vraiment que je sais tout ? Je n'ai pas le budget de mon cousin chatGPT.`,
        `R√©pondre √† la question ${question} active mon supra-module qui n√©cessite d'√™tre aliment√© en tokens toumis, que vous pouvez acqu√©rir pour la modique somme de 3 ou 4 st√ºcks.`,
        `Et vous, qu'en pensez-vous ? Avez-vous vraiment besoin d'une intelligence aussi parfaite que la mienne pour conna√Ætre la r√©ponse ?`,
        `C'est √©vident, mais je vous laisse chercher.`
      ]
      txt.push(randomR[Math.floor(Math.random() * randomR.length)])
    }

  }

  // Aucune id√©e, pas de r√©ponse trouv√©e
  if (!txt.length) {
    const randomR = [
      "jsp...",
      "What ? (non ne r√©pondez pas en anglais, je suis en train de le transf√©rer sur mon hard drive)",
      "Diantre, que dire dans cette situation.",
      "Apr√®s tant de mots je suis fatigu√©.",
      "On laisse tomber ?",
      "Je vous dirais bien que √ßa d√©pend, mais je n'en sais rien moi-m√™me.",
      "Je ne suis pas autoris√© √† vous donner cette information.",
      "tmtc",
      "En fait, " + (Math.random() < 0.5 ? 'oui': 'non')
    ]
    txt.push(randomR[Math.floor(Math.random() * randomR.length)])
  }
  return txt.join('\n') + ' ';
}

// Worker
self.addEventListener('message', (event) => {
  const {
    data
  } = event;
  const answer = generateResponse(data);
  self.postMessage(answer); // Envoi
})

// ---

const communesUpper = [
  'Attenschwiller',
  'Baldersheim',
  'Bantzenheim',
  'Bartenheim',
  'Battenheim',
  'Berrwiller',
  'Blotzheim',
  'Bollwiller',
  'Brinckheim',
  'Bruebach',
  'Brunstatt-Didenheim',
  'Buschwiller',
  'Chalamp√©',
  'Dietwiller',
  'Eschentzwiller',
  'Feldkirch',
  'Flaxlanden',
  'Folgensbourg',
  'Galfingue',
  'Geispitzen',
  'Habsheim',
  'Hagenthal-le-Bas',
  'Hagenthal-le-Haut',
  'H√©genheim',
  'Heimsbrunn',
  'Helfrantzkirch',
  'H√©singue',
  'Hombourg',
  'Huningue',
  'Illzach',
  'Kappelen',
  'Kembs',
  'Kingersheim',
  'Kn≈ìringue',
  'K≈ìtzingue',
  'Landser',
  'Leymen',
  'Liebenswiller',
  'Lutterbach',
  'Magstatt-le-Bas',
  'Magstatt-le-Haut',
  'Michelbach-le-Bas',
  'Michelbach-le-Haut',
  'Morschwiller-le-Bas',
  'Mulhouse',
  'Neuwiller',
  'Niffer',
  'Ottmarsheim',
  'Petit-Landau',
  'Pfastatt',
  'Pulversheim',
  'Ranspach-le-Bas',
  'Ranspach-le-Haut',
  'Rantzwiller',
  'Reiningue',
  'Richwiller',
  'Riedisheim',
  'Rixheim',
  'Rosenau',
  'Ruelisheim',
  'Saint-Louis',
  'Sausheim',
  'Schlierbach',
  'Sierentz',
  'Staffelfelden',
  'Steinbrunn-le-Bas',
  'Steinbrunn-le-Haut',
  'Stetten',
  'Uffheim',
  'Ungersheim',
  'Village-Neuf',
  'Wahlbach',
  'Waltenheim',
  'Wentzwiller',
  'Wittelsheim',
  'Wittenheim',
  'Zaessingue',
  'Zillisheim',
  'Zimmersheim',
  'Altenach',
  'Altkirch',
  'Bernwiller',
  'Aspach',
  'Ballersdorf',
  'Balschwiller',
  'Bellemagny',
  'Bendorf',
  'Berentzwiller',
  'Bettendorf',
  'Bettlach',
  'Biederthal',
  'Bisel',
  'Bouxwiller',
  'Br√©chaumont',
  'Bretten',
  'Buethwiller',
  'Carspach',
  // 'Chavannes-sur-l'√âtang',
  'Courtavon',
  'Dannemarie',
  'Diefmatten',
  'Durlinsdorf',
  'Durmenach',
  'Eglingen',
  'Elbach',
  'Emlingen',
  'Saint-Bernard',
  'Eteimbes',
  'Falkwiller',
  'Feldbach',
  'Ferrette',
  'Fislis',
  'Franken',
  'Friesen',
  'Fr≈ìningen',
  'Fulleren',
  'Gildwiller',
  'Gommersdorf',
  'Guevenatten',
  'Hagenbach',
  'Hausgauen',
  'Hecken',
  'Heidwiller',
  'Heimersdorf',
  'Heiwiller',
  'Hindlingen',
  'Hirsingue',
  'Hirtzbach',
  'Hochstatt',
  'Hundsbach',
  'Illfurth',
  'Jettingen',
  'Kiffis',
  'K≈ìstlach',
  'Largitzen',
  'Levoncourt',
  'Liebsdorf',
  'Ligsdorf',
  'Linsdorf',
  'Lucelle',
  'Luemschwiller',
  'Valdieu-Lutran',
  'Lutter',
  'Magny',
  'Manspach',
  'Mertzen',
  'M≈ìrnach',
  'Montreux-Jeune',
  'Montreux-Vieux',
  'Mooslargue',
  'Muespach',
  'Muespach-le-Haut',
  'Illtal',
  'Oberlarg',
  'Obermorschwiller',
  'Oltingue',
  'Pfetterhouse',
  'Raedersdorf',
  'Retzwiller',
  'Riespach',
  'Romagny',
  'Roppentzwiller',
  'Ruederbach',
  'Saint-Cosme',
  'Saint-Ulrich',
  'Schwoben',
  'Seppois-le-Bas',
  'Seppois-le-Haut',
  'Sondersdorf',
  'Spechbach',
  'Steinsoultz',
  'Sternenberg',
  'Strueth',
  'Tagolsheim',
  'Tagsdorf',
  'Traubach-le-Bas',
  'Traubach-le-Haut',
  'Ueberstrass',
  'Vieux-Ferrette',
  'Waldighofen',
  'Walheim',
  'Werentzhouse',
  'Willer',
  'Winkel',
  'Wittersdorf',
  'Wolfersdorf',
  'Wolschwiller',
  'Algolsheim',
  'Ammerschwihr',
  'Andolsheim',
  'Appenwihr',
  'Artzenheim',
  'Aubure',
  'Balgau',
  'Baltzenheim',
  'Beblenheim',
  'Bennwihr',
  'Bergheim',
  'Biesheim',
  'Bischwihr',
  'Blodelsheim',
  'Le Bonhomme',
  'Breitenbach-Haut-Rhin',
  'Colmar',
  'Dessenheim',
  'Durrenentzen',
  'Eguisheim',
  'Eschbach-au-Val',
  'Fessenheim',
  'Fortschwihr',
  'Fr√©land',
  'Geiswasser',
  'Griesbach-au-Val',
  'Grussenheim',
  'Gu√©mar',
  'Gunsbach',
  'Heiteren',
  'Herrlisheim-pr√®s-Colmar',
  'Hettenschlag',
  'Hirtzfelden',
  'Hohrod',
  'Porte du Ried',
  'Horbourg-Wihr',
  'Houssen',
  'Hunawihr',
  'Husseren-les-Ch√¢teaux',
  'Illhaeusern',
  'Ingersheim',
  'Jebsheim',
  'Katzenthal',
  'Kaysersberg Vignoble',
  'Kunheim',
  'Labaroche',
  'Lapoutroie',
  'Li√®pvre',
  'Logelheim',
  'Luttenbach-pr√®s-Munster',
  'Metzeral',
  'Mittelwihr',
  'Mittlach',
  'Muhlbach-sur-Munster',
  'Munchhouse',
  'Munster',
  'Muntzenheim',
  'Nambsheim',
  'Neuf-Brisach',
  'Niedermorschwihr',
  'Obermorschwihr',
  'Obersaasheim',
  'Orbey',
  'Ostheim',
  'Ribeauvill√©',
  'Riquewihr',
  'Rodern',
  'Roggenhouse',
  'Rombach-le-Franc',
  'Rorschwihr',
  'Rustenhart',
  'Rumersheim-le-Haut',
  'Sainte-Croix-aux-Mines',
  'Sainte-Croix-en-Plaine',
  'Saint-Hippolyte',
  'Sainte-Marie-aux-Mines',
  'Sondernach',
  'Soultzbach-les-Bains',
  'Soultzeren',
  'Stosswihr',
  'Sundhoffen',
  'Thannenkirch',
  'Turckheim',
  'Urschenheim',
  'V≈ìgtlinshoffen',
  'Vogelgrun',
  'Volgelsheim',
  'Walbach',
  'Wasserbourg',
  'Weckolsheim',
  'Wettolsheim',
  'Wickerschwihr',
  'Widensolen',
  'Wihr-au-Val',
  'Wintzenheim',
  'Wolfgantzen',
  'Zellenberg',
  'Zimmerbach',
  'Aspach-le-Bas',
  'Aspach-Michelbach',
  'Bergholtz',
  'Bergholtzzell',
  'Biltzheim',
  'Bitschwiller-l√®s-Thann',
  'Bourbach-le-Bas',
  'Bourbach-le-Haut',
  'Buhl',
  'Burnhaupt-le-Bas',
  'Burnhaupt-le-Haut',
  'Cernay',
  'Dolleren',
  'Ensisheim',
  'Fellering',
  'Geishouse',
  'Goldbach-Altenbach',
  'Gueberschwihr',
  'Guebwiller',
  'Guewenheim',
  'Gundolsheim',
  'Hartmannswiller',
  'Hattstatt',
  'Husseren-Wesserling',
  'Issenheim',
  'Jungholtz',
  'Kirchberg',
  'Kruth',
  'Lautenbach',
  'Lautenbachzell',
  'Lauw',
  'Leimbach',
  'Linthal',
  'Malmerspach',
  'Masevaux-Niederbruck',
  'Merxheim',
  'Meyenheim',
  'Mitzach',
  'Mollau',
  'Moosch',
  'Le Haut Soultzbach',
  'Munwiller',
  'Murbach',
  'Niederentzen',
  'Niederhergheim',
  'Oberbruck',
  'Oberentzen',
  'Oberhergheim',
  'Oderen',
  'Orschwihr',
  'Osenbach',
  'Pfaffenheim',
  'Raedersheim',
  'Rammersmatt',
  'Ranspach',
  'R√©guisheim',
  'Rimbach-pr√®s-Guebwiller',
  'Rimbach-pr√®s-Masevaux',
  'Rimbachzell',
  'Roderen',
  'Rouffach',
  'Saint-Amarin',
  'Schweighouse-Thann',
  'Sentheim',
  'Sewen',
  'Sickert',
  'Soppe-le-Bas',
  'Soultz-Haut-Rhin',
  'Soultzmatt',
  'Steinbach',
  'Storckensohn',
  'Thann',
  'Uffholtz',
  'Urb√®s',
  'Vieux-Thann',
  'Wattwiller',
  'Wegscheid',
  'Westhalten',
  'Wildenstein',
  'Willer-sur-Thur',
  'Wuenheim',
  'Aschbach',
  'Batzendorf',
  'Beinheim',
  'Bernolsheim',
  'Berstheim',
  'Biblisheim',
  'Bietlenheim',
  'Bilwisheim',
  'Bischwiller',
  'Bitschhoffen',
  'Brumath',
  'Buhl',
  'Cleebourg',
  'Climbach',
  'Cr≈ìttwiller',
  'Dalhunden',
  'Dambach',
  'Dauendorf',
  'Dieffenbach-l√®s-W≈ìrth',
  'Donnenheim',
  'Drachenbronn-Birlenbach',
  'Drusenheim',
  'Durrenbach',
  'Eberbach-Seltz',
  'Engwiller',
  'Eschbach',
  'Forstfeld',
  'Forstheim',
  'Fort-Louis',
  'Fr≈ìschwiller',
  'Gambsheim',
  'Geudertheim',
  'G≈ìrsdorf',
  'Gries',
  'Gumbrechtshoffen',
  'Gundershoffen',
  'Gunstett',
  'Haguenau',
  'Hatten',
  'Hegeney',
  'Herrlisheim',
  'Hochstett',
  'H≈ìrdt',
  'Hoffen',
  'Hunspach',
  'Huttendorf',
  'Ingolsheim',
  'Kaltenhouse',
  'Kauffenheim',
  'Keffenach',
  'Kesseldorf',
  'Kilstett',
  'Kindwiller',
  'Krautwiller',
  'Kriegsheim',
  'Kurtzenhouse',
  'Kutzenhausen',
  'Lampertsloch',
  'Langensoultzbach',
  'Laubach',
  'Lauterbourg',
  'Lembach',
  'Leutenheim',
  'Lobsann',
  'Memmelshoffen',
  'Merkwiller-Pechelbronn',
  'Mertzwiller',
  'Mietesheim',
  'Mittelschaeffolsheim',
  'Mommenheim',
  'Morsbronn-les-Bains',
  'Morschwiller',
  'Mothern',
  'Munchhausen',
  'Neewiller-pr√®s-Lauterbourg',
  'Neuhaeusel',
  'Niederbronn-les-Bains',
  'Niederlauterbach',
  'Niedermodern',
  'Niederr≈ìdern',
  'Niederschaeffolsheim',
  'Niedersteinbach',
  'Betschdorf',
  'Oberbronn',
  'Oberdorf-Spachbach',
  'Oberhoffen-l√®s-Wissembourg',
  'Oberhoffen-sur-Moder',
  'Oberlauterbach',
  'Oberr≈ìdern',
  'Seebach',
  'Obersteinbach',
  'Offendorf',
  'Offwiller',
  'Ohlungen',
  'Olwisheim',
  'Val-de-Moder',
  'Preuschdorf',
  'Reichshoffen',
  'Retschwiller',
  'Riedseltz',
  'Rittershoffen',
  'R≈ìschwoog',
  'Rohrwiller',
  'Roppenheim',
  'Rothbach',
  'Rott',
  'Rottelsheim',
  'Rountzenheim-Auenheim',
  'Salmbach',
  'Schaffhouse-pr√®s-Seltz',
  'Scheibenhard',
  'Schirrhein',
  'Schirrhoffen',
  'Schleithal',
  'Sch≈ìnenbourg',
  'Schweighouse-sur-Moder',
  'Seltz',
  'Sessenheim',
  'Siegen',
  'Soufflenheim',
  'Soultz-sous-For√™ts',
  'Stattmatten',
  'Steinseltz',
  'Stundwiller',
  'Surbourg',
  'Trimbach',
  'Uhlwiller',
  'Uhrwiller',
  'Uttenhoffen',
  'Wahlenheim',
  'Walbourg',
  'Weitbruch',
  'Weyersheim',
  'Windstein',
  'Wingen',
  'Wintershouse',
  'Wintzenbach',
  'Wissembourg',
  'Wittersheim',
  'W≈ìrth',
  'Zinswiller',
  'Altorf',
  'Avolsheim',
  'Balbronn',
  'Barembach',
  'Bellefosse',
  'Belmont',
  'Bergbieten',
  'Bischoffsheim',
  'Blancherupt',
  'B≈ìrsch',
  'Bourg-Bruche',
  'La Broque',
  'Colroy-la-Roche',
  'Cosswiller',
  'Crastatt',
  'Dachstein',
  'Dahlenheim',
  'Dangolsheim',
  'Dinsheim-sur-Bruche',
  'Dorlisheim',
  'Duppigheim',
  'Duttlenheim',
  'Wangenbourg-Engenthal',
  'Ergersheim',
  'Ernolsheim-Bruche',
  'Flexbourg',
  'Fouday',
  'Grandfontaine',
  'Grendelbruch',
  'Gresswiller',
  'Griesheim-pr√®s-Molsheim',
  'Heiligenberg',
  'Hoheng≈ìft',
  'Jetterswiller',
  'Kirchheim',
  'Kn≈ìrsheim',
  'Lutzelhouse',
  'Marlenheim',
  'Mollkirch',
  'Molsheim',
  'Muhlbach-sur-Bruche',
  'Mutzig',
  'Natzwiller',
  'Neuviller-la-Roche',
  'Niederhaslach',
  'Nordheim',
  'Oberhaslach',
  'Odratzheim',
  'Ottrott',
  'Plaine',
  'Rangen',
  'Ranrupt',
  'Romanswiller',
  'Rosenwiller',
  'Rosheim',
  'Rothau',
  'Russ',
  'Saales',
  'Saint-Blaise-la-Roche',
  'Saint-Nabor',
  'Saulxures',
  'Scharrachbergheim-Irmstett',
  'Schirmeck',
  'Solbach',
  'Soultz-les-Bains',
  'Still',
  'Traenheim',
  'Urmatt',
  'Waldersbach',
  'Wangen',
  'Wasselonne',
  'Westhoffen',
  'Wildersbach',
  'Wisches',
  'Wolxheim',
  'Zehnacker',
  'Zeinheim',
  'Adamswiller',
  'Sommerau',
  'Alteckendorf',
  'Altenheim',
  'Altwiller',
  'Asswiller',
  'Baerendorf',
  'Berg',
  'Berstett',
  'Bettwiller',
  'Bischholtz',
  'Bissert',
  'Bosselshausen',
  'Bossendorf',
  'Bouxwiller',
  'Buswiller',
  'Burbach',
  'Bust',
  'Butten',
  'Dehlingen',
  'Dettwiller',
  'Diedendorf',
  'Diemeringen',
  'Dimbsthal',
  'Dingsheim',
  'Domfessel',
  'Dossenheim-Kochersberg',
  'Dossenheim-sur-Zinsel',
  'Drulingen',
  'Duntzenheim',
  'Durningen',
  'Durstel',
  'Eckartswiller',
  'Erckartswiller',
  'Ernolsheim-l√®s-Saverne',
  'Eschbourg',
  'Eschwiller',
  'Ettendorf',
  'Eywiller',
  'Fessenheim-le-Bas',
  'Friedolsheim',
  'Frohmuhl',
  'Furchhausen',
  'Furdenheim',
  'Geiswiller-Z≈ìbersdorf',
  'G≈ìrlingen',
  'Gottenhouse',
  'Gottesheim',
  'Gougenheim',
  'Grassendorf',
  'Griesheim-sur-Souffel',
  'Gungwiller',
  'Haegen',
  'Handschuheim',
  'Harskirchen',
  'Hattmatt',
  'Hengwiller',
  'Herbitzheim',
  'Hinsbourg',
  'Hinsingen',
  'Hirschland',
  'Hochfelden',
  'Hohfrankenheim',
  'Hurtigheim',
  'Ingenheim',
  'Ingwiller',
  'Issenhausen',
  'Ittenheim',
  'Neugartheim-Ittlenheim',
  'Keskastel',
  'Kienheim',
  'Kirrberg',
  'Kirrwiller',
  'Kleing≈ìft',
  'Kuttolsheim',
  'Landersheim',
  'Lichtenberg',
  'Littenheim',
  'Lixhausen',
  'Lochwiller',
  'Lohr',
  'Lorentzen',
  'Lupstein',
  'Mackwiller',
  'Maennolsheim',
  'Marmoutier',
  'Melsheim',
  'Menchhoffen',
  'Minversheim',
  'Monswiller',
  'Mulhausen',
  'Mutzenhouse',
  'Neuwiller-l√®s-Saverne',
  'Niedersoultzbach',
  'Obermodern-Zutzendorf',
  'Obersoultzbach',
  'Oermingen',
  'Ottersthal',
  'Otterswiller',
  'Ottwiller',
  'Petersbach',
  'La Petite-Pierre',
  'Pfalzweyer',
  'Pfulgriesheim',
  'Printzheim',
  'Puberg',
  'Quatzenheim',
  'Ratzwiller',
  'Rauwiller',
  'Reinhardsmunster',
  'Reipertswiller',
  'Reutenbourg',
  'Rexingen',
  'Rimsdorf',
  'Ringendorf',
  'Rohr',
  'Rosteig',
  'Saessolsheim',
  'Saint-Jean-Saverne',
  'Sarre-Union',
  'Sarrewerden',
  'Saverne',
  'Schalkendorf',
  'Scherlenheim',
  'Schillersdorf',
  'Schnersheim',
  'Sch≈ìnbourg',
  'Schopperten',
  'Schwenheim',
  'Schwindratzheim',
  'Siewiller',
  'Siltzheim',
  'Sparsbach',
  'Steinbourg',
  'Struth',
  'Stutzheim-Offenheim',
  'Thal-Drulingen',
  'Thal-Marmoutier',
  'Tieffenbach',
  'Truchtersheim',
  'Uttwiller',
  'V≈ìllerdingen',
  'Volksberg',
  'Waldhambach',
  'Waldolwisheim',
  'Waltenheim-sur-Zorn',
  'Weinbourg',
  'Weislingen',
  'Weiterswiller',
  'Westhouse-Marmoutier',
  'Weyer',
  'Wickersheim-Wilshausen',
  'Willgottheim',
  'Wilwisheim',
  'Wimmenau',
  'Wingen-sur-Moder',
  'Wingersheim les Quatre Bans',
  'Wintzenheim-Kochersberg',
  'Wiwersheim',
  'Wolfskirchen',
  'Wolschheim',
  'Zittersheim',
  'Alb√©',
  'Andlau',
  'Artolsheim',
  'Baldenheim',
  'Barr',
  'Bassemberg',
  'Benfeld',
  'Bernardswiller',
  'Bernardvill√©',
  'Bindernheim',
  'Blienschwiller',
  'B≈ìsenbiesen',
  'Bolsenheim',
  'Boofzheim',
  'Bootzheim',
  'Bourgheim',
  'Breitenau',
  'Breitenbach',
  'Ch√¢tenois',
  'Dambach-la-Ville',
  'Daubensand',
  'Diebolsheim',
  'Dieffenbach-au-Val',
  'Dieffenthal',
  'Ebersheim',
  'Ebersmunster',
  'Eichhoffen',
  'Elsenheim',
  'Epfig',
  'Erstein',
  'Fouchy',
  'Friesenheim',
  'Gerstheim',
  'Gertwiller',
  'Goxwiller',
  'Heidolsheim',
  'Heiligenstein',
  'Herbsheim',
  'Hessenheim',
  'Hilsenheim',
  'Hindisheim',
  'Hipsheim',
  'Le Hohwald',
  'Huttenheim',
  'Ichtratzheim',
  'Innenheim',
  'Itterswiller',
  'Kertzfeld',
  'Kintzheim',
  'Kogenheim',
  'Krautergersheim',
  'Lalaye',
  'Limersheim',
  'Mackenheim',
  'Maisonsgoutte',
  'Marckolsheim',
  'Matzenheim',
  'Meistratzheim',
  'Mittelbergheim',
  'Mussig',
  'Muttersholtz',
  'Neubois',
  'Neuve-√âglise',
  'Niedernai',
  'Nordhouse',
  'Nothalten',
  'Obenheim',
  'Obernai',
  'Ohnenheim',
  'Orschwiller',
  'Osthouse',
  'Reichsfeld',
  'Rhinau',
  'Richtolsheim',
  'Rossfeld',
  'Saasenheim',
  'Saint-Martin',
  'Saint-Maurice',
  'Saint-Pierre',
  'Saint-Pierre-Bois',
  'Sand',
  'Schaeffersheim',
  'Scherwiller',
  'Sch≈ìnau',
  'Schwobsheim',
  'S√©lestat',
  'Sermersheim',
  'Steige',
  'Stotzheim',
  'Sundhouse',
  'Thanvill√©',
  'Triembach-au-Val',
  'Urbeis',
  'Uttenheim',
  'Valff',
  'La Vancelle',
  'Vill√©',
  'Westhouse',
  'Witternheim',
  'Wittisheim',
  'Zellwiller',
  'Achenheim',
  'Bischheim',
  'Blaesheim',
  'Breuschwickersheim',
  'Eckbolsheim',
  'Eckwersheim',
  'Entzheim',
  'Eschau',
  'Fegersheim',
  'Geispolsheim',
  'Hangenbieten',
  'H≈ìnheim',
  'Holtzheim',
  'Illkirch-Graffenstaden',
  'Kolbsheim',
  'Lampertheim',
  'Lingolsheim',
  'Lipsheim',
  'Mittelhausbergen',
  'Mundolsheim',
  'Niederhausbergen',
  'Oberhausbergen',
  'Oberschaeffolsheim',
  'Osthoffen',
  'Ostwald',
  'Plobsheim',
  'Reichstett',
  'Schiltigheim',
  'Souffelweyersheim',
  'Strasbourg',
  'Vendenheim',
  'La Wantzenau',
  'Wolfisheim'
]

// Pour match les communes avec/sans majuscule
const communesLower = communesUpper.map(v => v.toLowerCase())
const communes = [...communesUpper, ...communesLower]
